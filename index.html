<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="jquery.js"></script>
    <title>Refresher</title>
  </head>
  <body>
    <!-- date format should be  ="dd/mm/yyyy hh:mm:ss" or ="yyyy-mm-dd hh:mm:ss" -->
    <div data-count-down="1" class="countdownHolder" data-refresh-time="22/09/2016 15:43:00"></div>
    <script>
      $(function(){
        var $trigger = $('[data-count-down]');
        if ( $trigger.length ) {
          $trigger.each(function(){
            var datetime = $(this).data('refresh-time');
            console.log(datetime);

            //Makes datetime British format, only when the datetime string has slashes
            function localiseDatetimeInput(datetime) {
              if(datetime.indexOf('/') > -1) {
                // We expect the user to input dd/mm
                var datetimeArray = datetime.split('/');
                // Gets the dd and mm from user input
                var dd = datetimeArray.splice(0, 1);
                var mm = datetimeArray.splice(0, 1);
                // datetime converted to the mm/dd format so javascript gets the right datetime
                return [mm, dd, datetimeArray].join('/');
              }
            }
            datetime = localiseDatetimeInput(datetime);

            // refreshTime is only added to make a js date object
            var refreshTime = new Date(datetime);
            if (new Date() > refreshTime) {
              location.reload();
            }
          });
        }
      });
    </script>
  </body>
</html>
